<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Neha Jorewar Makeover & Hairstyling Studio</title>
  <meta name="description" content="Neha Jorewar — Makeover & Hairstyling Studio. Bridal, party, fashion makeup and hairstyling services in Buldana. Book an appointment today." />
  <meta property="og:image" content="images/main_background.jpeg" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
  <!-- Font Awesome kept for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous"/>

  <style>
    :root{
      --nav-height:64px;
      --accent:#7a2253;
      --accent-2:#d36ba6;
      --bg-weak:#fff7fa;
      --card-bg:#fff;
      --card-border:#f3d7e8;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:"Inter",sans-serif;background:var(--bg-weak);color:#333;scroll-behavior:smooth;padding-top:var(--nav-height)}
    h1,h2,h3{font-family:"Playfair Display",serif;color:var(--accent);margin:0 0 12px 0}
    a{color:inherit;text-decoration:none}
    section{padding:80px 20px;max-width:1100px;margin:auto;opacity:0;transform:translateY(30px);animation:fadeIn .9s forwards}
    @keyframes fadeIn{to{opacity:1;transform:none}}
    .skip-link{position:absolute;left:-9999px;top:auto;background:#fff;padding:8px 12px;z-index:10000}
    .skip-link:focus{left:8px;top:8px;border-radius:6px;box-shadow:0 4px 8px rgba(0,0,0,.12)}

    /* NAV */
    .navbar{position:fixed;top:0;left:0;right:0;height:var(--nav-height);display:flex;align-items:center;justify-content:space-between;padding:10px 24px;background:rgba(255,255,255,.95);backdrop-filter:blur(8px);border-bottom:1px solid #f3cfe0;z-index:999}
    .brand{font-family:"Playfair Display",serif;font-size:1.1rem;font-weight:600;color:var(--accent)}
    .nav-links{display:flex;gap:22px;align-items:center}
    .nav-links a{font-weight:500;color:var(--accent)}
    .nav-links a:hover,.nav-links a:focus{color:var(--accent-2);outline:none}

    /* hamburger button (JS-driven) */
    .hamburger{
      display:none;
      align-items:center;
      justify-content:center;
      gap:6px;
      width:44px;height:40px;
      border-radius:8px;
      background:transparent;
      border:1px solid transparent;
      cursor:pointer;
      padding:6px;
    }
    .hamburger svg { display:block; width:22px; height:16px; }
    .hamburger:focus{outline:3px solid #ffd6ea; outline-offset:3px}
    .hamburger .bar { fill: var(--accent); }

    /* HERO */
    .hero{min-height:calc(90vh - var(--nav-height));background:url("images/main_background.jpeg") center/cover no-repeat;position:relative;display:flex;justify-content:center;align-items:center;text-align:center;color:white;padding:40px 20px}
    .hero::after{content:"";position:absolute;inset:0;background:rgba(0,0,0,.45)}
    .hero-content{position:relative;z-index:2;animation:fadeInHero 1.2s ease-out forwards;max-width:900px}
    @keyframes fadeInHero{0%{opacity:0;transform:translateY(40px)}100%{opacity:1;transform:none}}
    .hero h1{font-size:2.6rem;margin-bottom:8px;color:white}
    .hero h2{font-size:1.6rem;font-weight:400;color:white;margin-top:0}
    .hero p{margin:14px 0 22px;font-size:1.05rem;color:#f7eaf1}
    .hero button{padding:12px 32px;background:linear-gradient(45deg,var(--accent-2),#b8588e);border:none;border-radius:25px;color:white;cursor:pointer;font-size:1rem}

    /* CARD (used for services and about) */
    .card {
      background: var(--card-bg);
      padding:22px;
      border-radius:12px;
      border:1px solid var(--card-border);
      text-align:left;
      transition:transform .25s,box-shadow .25s;
    }
    .card:hover{transform:translateY(-6px);box-shadow:0 10px 20px rgba(0,0,0,.06)}
    .card .icon{font-size:2.2rem;color:var(--accent-2);margin-bottom:10px}
    .card .card-body{display:flex;gap:16px;align-items:center}
    .card .card-body img{width:140px;border-radius:10px;object-fit:cover;height:auto;max-width:40%}
    .card h3{margin:0 0 6px 0}
    .card p{margin:0;color:#444}

    /* SERVICES layout */
    .services h2{text-align:center;margin-bottom:40px}
    .service-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:25px}
    .service-box{text-align:center;padding:22px;border-radius:12px;border:1px solid var(--card-border);background:var(--card-bg)}
    .service-box i{font-size:2.2rem;color:var(--accent-2);margin-bottom:10px}
    .open-bridal-gallery{margin-top:12px;padding:10px 14px;border-radius:8px;background:linear-gradient(45deg,var(--accent-2),#b8588e);color:#fff;border:none;cursor:pointer}

    /* ABOUT section styles (uses .card to match services) */
    .about{display:flex;gap:24px;align-items:center;flex-wrap:wrap}
    .about-card{display:flex;gap:18px;align-items:center}
    .about-card img{width:220px;border-radius:12px;object-fit:cover;height:auto}
    .about-card .about-text{flex:1}

    /* TESTIMONIALS */
    .testimonials{text-align:center}
    .testimonial-slider{max-width:700px;margin:auto;background:var(--card-bg);padding:30px;border-radius:12px;border:1px solid var(--card-border)}
    .testimonial{display:none}
    .testimonial.active{display:block;animation:fadeIn .6s}

    /* CONTACT */
    form{max-width:600px;margin:30px auto 0;padding:30px;background:var(--card-bg);border-radius:12px;border:1px solid var(--card-border)}
    form input, form textarea{width:100%;margin-top:12px;padding:12px;border-radius:8px;border:1px solid #ccc;font-family:inherit}
    form button{margin-top:20px;width:100%;padding:14px;background:linear-gradient(45deg,var(--accent-2),#b8588e);border:none;color:white;border-radius:8px;cursor:pointer;font-size:1rem}
    .form-message{display:none;margin-top:15px;padding:12px 20px;border-radius:8px;font-weight:500;text-align:center;font-size:.95rem;opacity:0;transition:opacity .5s}
    .form-message.success{background:linear-gradient(90deg,var(--accent-2),#b8588e);color:white}
    .form-message.error{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}

    footer{background:#ffeaf3;padding:25px;text-align:center;margin-top:30px}
    .social a{margin:0 10px;font-size:1.5rem;color:var(--accent)}

    .whatsapp-float{position:fixed;bottom:25px;right:25px;background:#25d366;color:white;padding:14px 17px;border-radius:50%;font-size:1.8rem;box-shadow:0 4px 10px rgba(0,0,0,.2);z-index:999;display:flex;align-items:center;justify-content:center}

    /* responsive nav behavior (JS-driven) */
    @media (max-width:768px) {
      .hamburger{display:flex}
      .nav-links{
        position:absolute;
        top:calc(var(--nav-height));
        right:8px;
        background:#fff7fa;
        flex-direction:column;
        width:220px;
        padding:12px;
        border-radius:0 0 10px 10px;
        border:1px solid #f3d7e8;
        transform:translateY(-8px);
        opacity:0;
        pointer-events:none;
        transition:transform .22s ease,opacity .22s ease;
        box-shadow:0 10px 30px rgba(0,0,0,.08);
      }
      .nav-links.open{transform:none;opacity:1;pointer-events:auto}
      nav[role="navigation"] .nav-links a{padding:10px 6px;display:block}
      .about{flex-direction:column;align-items:flex-start}
      .about-card img{width:100%;max-width:360px}
      .card .card-body img{max-width:45%}
    }

    @media (min-width:769px) {
      .nav-links{opacity:1!important;transform:none!important;pointer-events:auto!important}
    }

    /* ----------------- Modal (no zoom) ----------------- */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:2000}
    .modal[aria-hidden="false"]{display:flex}
    .modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.65)}
    .modal-panel{position:relative;width:95%;max-width:1200px;max-height:92vh;margin:auto;z-index:2;outline:none;display:flex;flex-direction:column;border-radius:12px}
    .modal-content{background:var(--card-bg);border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:12px;box-shadow:0 20px 40px rgba(0,0,0,.25)}
    .modal-close{position:absolute;right:14px;top:10px;z-index:3;background:transparent;border:none;font-size:20px;cursor:pointer;color:#333}
    .modal-main{display:flex;align-items:center;gap:8px;position:relative}

    .modal-image-wrap{flex:1;display:flex;align-items:center;justify-content:center;min-height:320px;max-height:72vh;overflow:hidden;border-radius:10px;background:#faf0f6;position:relative}
    .modal-image-wrap img{display:block;max-width:100%;max-height:72vh;width:auto;height:auto;object-fit:contain;user-select:none}

    .modal-spinner{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:48px;height:48px;border-radius:50%;border:5px solid rgba(0,0,0,0.08);border-top-color:var(--accent-2);border-right-color:#b8588e;animation:spin 0.9s linear infinite;display:none;z-index:4}
    @keyframes spin{to{transform:translate(-50%,-50%) rotate(360deg)}}
    .modal-spinner.visible{display:block}

    .modal-arrow{background:rgba(255,255,255,.95);border:none;width:44px;height:44px;border-radius:50%;box-shadow:0 8px 18px rgba(0,0,0,.12);font-size:26px;cursor:pointer;display:flex;align-items:center;justify-content:center}
    .modal-arrow:focus,.modal-close:focus{outline:3px solid #ffd6ea}
    .modal-thumbs-wrap{overflow-x:auto;padding:6px 4px}
    .modal-thumbs{display:flex;gap:8px;align-items:center}
    .modal-thumbs .thumb{border:2px solid transparent;border-radius:6px;padding:3px;background:transparent;cursor:pointer}
    .modal-thumbs .thumb img{width:84px;height:60px;object-fit:cover;border-radius:4px;display:block}
    .modal-thumbs .thumb[aria-selected="true"]{border-color:var(--accent-2);box-shadow:0 8px 20px rgba(211,107,166,.12)}
    .modal-caption{margin-top:6px;text-align:center;color:#444;font-size:.95rem}

    @media (max-width:800px){
      .modal-image-wrap{min-height:220px}
      .modal-thumbs .thumb img{width:64px;height:46px}
      .modal-arrow{width:38px;height:38px;font-size:22px}
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#maincontent">Skip to content</a>

  <!-- NAV -->
  <nav class="navbar" role="navigation" aria-label="Main navigation">
    <div class="brand">Neha Jorewar Studio</div>

    <!-- hamburger is a real button (JS will toggle .open on .nav-links) -->
    <button class="hamburger" id="hamburger-btn" aria-controls="primary-navigation" aria-expanded="false" aria-label="Toggle menu">
      <svg viewBox="0 0 24 16" aria-hidden="true" focusable="false">
        <rect class="bar" x="0" y="1" width="24" height="2" rx="1"></rect>
        <rect class="bar" x="0" y="7" width="24" height="2" rx="1"></rect>
        <rect class="bar" x="0" y="13" width="24" height="2" rx="1"></rect>
      </svg>
    </button>

    <div class="nav-links" id="primary-navigation" role="menu" data-open="false">
      <a href="#services" class="nav-link" role="menuitem">Services</a>
      <a href="#about" class="nav-link" role="menuitem">About</a>
      <a href="#testimonials" class="nav-link" role="menuitem">Reviews</a>
      <a href="#contact" class="nav-link" role="menuitem">Contact</a>
    </div>
  </nav>

  <main id="maincontent">
    <!-- HERO -->
    <section class="hero" aria-labelledby="hero-heading">
      <div class="hero-content">
        <h1 id="hero-heading">Neha Jorewar — Makeover & Hairstyling Studio</h1>
        <h2>Bringing out your inner elegance with professional touch, style, and care.</h2>
        <p>Expert bridal, party and fashion makeup plus hairstyling. Book your appointment today.</p>
        <button onclick="document.querySelector('#contact').scrollIntoView({ behavior: 'smooth' })">Book an Appointment</button>
      </div>
    </section>

    <!-- SERVICES -->
    <section class="services" id="services" aria-labelledby="services-heading">
      <h2 id="services-heading">Our Services</h2>
      <div class="service-list">
        <div class="service-box card" aria-labelledby="bridal-title">
          <div style="text-align:center">
            <i class="fa-solid fa-ring" aria-hidden="true" style="font-size:2.2rem;color:var(--accent-2)"></i>
          </div>
          <h3 id="bridal-title" style="text-align:center;margin-top:8px">Bridal Makeup</h3>
          <p style="text-align:center">Elegant, long-lasting bridal looks tailored to your personality.</p>
          <div style="text-align:center">
            <button class="open-bridal-gallery" type="button" aria-haspopup="dialog" aria-controls="bridal-modal">View Bridal Gallery</button>
          </div>
        </div>

        <div class="service-box card">
          <div style="text-align:center"><i class="fa-solid fa-wand-magic-sparkles" aria-hidden="true" style="font-size:2.2rem;color:var(--accent-2)"></i></div>
          <h3 style="text-align:center;margin-top:8px">Party Makeup</h3>
          <p style="text-align:center">Perfect glam for celebrations, parties, and events.</p>
        </div>

        <div class="service-box card">
          <div style="text-align:center"><i class="fa-solid fa-scissors" aria-hidden="true" style="font-size:2.2rem;color:var(--accent-2)"></i></div>
          <h3 style="text-align:center;margin-top:8px">Hairstyling</h3>
          <p style="text-align:center">Customized hairstyles from curls to buns, modern to classic.</p>
        </div>

        <div class="service-box card">
          <div style="text-align:center"><i class="fa-solid fa-comments" aria-hidden="true" style="font-size:2.2rem;color:var(--accent-2)"></i></div>
          <h3 style="text-align:center;margin-top:8px">Makeup Consultation</h3>
          <p style="text-align:center">Personalized product and style guidance.</p>
        </div>
      </div>
    </section>

    <!-- ABOUT (styled as a matching card) -->
    <section class="about" id="about" aria-labelledby="about-heading">
      <div class="card about-card" role="region" aria-labelledby="about-heading">
        <img id="about-img"
             src="images/neha_jorewar_about_me.jpeg"
             srcset="images/neha_jorewar_about_me-480.jpeg 480w, images/neha_jorewar_about_me-800.jpeg 800w, images/neha_jorewar_about_me.jpeg 1200w"
             sizes="(max-width:600px) 100vw, 360px"
             alt="Neha Jorewar smiling, makeup artist"
             loading="lazy">
        <div class="about-text card-body" style="flex-direction:column;gap:10px">
          <div>
            <h2 id="about-heading">About Me</h2>
            <p>Hi! I'm <strong>Neha Jorewar</strong>, a professional makeover & hairstyling artist with years of experience crafting elegant bridal, party, and fashion looks.</p>
            <p>My aim is to bring out the best version of you—naturally beautiful, confident, and radiant.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- TESTIMONIALS -->
    <section class="testimonials" id="testimonials" aria-labelledby="testimonials-heading">
      <h2 id="testimonials-heading">Client Reviews</h2>
      <div class="testimonial-slider" aria-live="polite">
        <div class="testimonial active">"Absolutely loved my bridal makeup! It stayed perfect all day!" — <b>Priya</b></div>
        <div class="testimonial">"Neha understood exactly what look I wanted. Highly recommended!" — <b>Sneha</b></div>
        <div class="testimonial">"Amazing hairstyling and so professional. Will book again!" — <b>Anjali</b></div>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="contact" id="contact" aria-labelledby="contact-heading">
      <h2 id="contact-heading">Contact Me</h2>
      <form id="contact-form" action="https://formspree.io/f/myzaagjk" method="POST" novalidate>
        <label class="sr-only" for="name">Your Name</label>
        <input id="name" type="text" name="name" placeholder="Your Name" required />
        <label class="sr-only" for="email">Your Email</label>
        <input id="email" type="email" name="_replyto" placeholder="Your Email" required />
        <label class="sr-only" for="message">Your Message</label>
        <textarea id="message" name="message" rows="5" placeholder="Your Message" required></textarea>
        <button type="submit">Send Message</button>
      </form>

      <p style="text-align:center; margin-top:15px;">
        Or chat with me on WhatsApp:
        <a href="#" id="whatsapp-contact" target="_blank" rel="noopener noreferrer" style="color:#25d366; font-weight:bold;">+91 70205 88760</a>
      </p>

      <p id="form-success" class="form-message success" role="status">✔ Thank you! Your message has been sent.</p>
      <p id="form-error" class="form-message error" role="alert">✖ Oops! Something went wrong. Please try again.</p>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="social">
      <a href="https://www.instagram.com/nehajorewar_makeover?igsh=MWZxMWhsa25xMDAzZA==" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram" aria-hidden="true"></i></a>
      <a href="#" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook" aria-hidden="true"></i></a>
      <a href="#" id="whatsapp-footer" target="_blank" rel="noopener noreferrer"><i class="fab fa-whatsapp" aria-hidden="true"></i></a>
    </div>
    <p>© 2025 Makeover & Hairstyling Studio. All rights reserved.</p>
  </footer>

  <a href="#" class="whatsapp-float" id="whatsapp-float" aria-label="Chat on WhatsApp"><i class="fab fa-whatsapp" aria-hidden="true"></i></a>

  <!-- BRIDAL GALLERY MODAL (no zoom) -->
  <div id="bridal-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-label="Bridal gallery">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-panel" role="document" tabindex="-1">
      <button class="modal-close" aria-label="Close gallery" data-action="close">✕</button>

      <div class="modal-content">
        <div class="modal-main">
          <button class="modal-arrow prev" data-action="prev" aria-label="Previous image">‹</button>

          <div class="modal-image-wrap" id="modal-image-wrap" aria-live="polite">
            <div class="modal-spinner" id="modal-spinner" aria-hidden="true"></div>
            <img id="bridal-modal-main" src="" alt="Bridal image" loading="lazy">
            <div id="bridal-caption" class="modal-caption" aria-live="polite"></div>
          </div>

          <button class="modal-arrow next" data-action="next" aria-label="Next image">›</button>
        </div>

        <div class="modal-thumbs-wrap">
          <div id="bridal-thumbs" class="modal-thumbs" role="tablist" aria-label="Bridal thumbnails"></div>
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------- Basic helpers & UX ---------- */

/* Testimonial slider */
(function testimonialSlider(){
  const testimonials = document.querySelectorAll('.testimonial');
  if (!testimonials || testimonials.length === 0) return;
  let idx = 0; testimonials.forEach((t,i)=>t.classList.toggle('active', i===0));
  setInterval(()=>{ testimonials.forEach(t=>t.classList.remove('active')); testimonials[idx].classList.add('active'); idx=(idx+1)%testimonials.length; }, 3000);
})();

/* Contact form AJAX with simple messages */
(function contactFormAjax(){
  const form = document.getElementById('contact-form');
  const successMessage = document.getElementById('form-success');
  const errorMessage = document.getElementById('form-error');
  if (!form) return;
  form.addEventListener('submit', async function(e){
    e.preventDefault();
    const formData = new FormData(form);
    try {
      const response = await fetch(form.action, { method: form.method, body: formData, headers: { 'Accept': 'application/json' }});
      if (response.ok) { form.reset(); showMessage(successMessage); } else { throw new Error('Network response was not ok.'); }
    } catch (err) { showMessage(errorMessage); }
  });
  function showMessage(element) {
    element.style.display = 'block'; void element.offsetWidth; element.style.opacity = '1';
    setTimeout(()=>{ element.style.opacity = '0'; setTimeout(()=>{ element.style.display='none' }, 500); }, 5000);
  }
})();

/* Whatsapp links */
(function whatsappLinks(){
  const phone = "917020588760";
  const ids = ['whatsapp-float','whatsapp-contact','whatsapp-footer'];
  const isMobile = /Mobile|Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent);
  ids.forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    if (isMobile) el.href = `https://wa.me/${phone}`; else el.href = `https://web.whatsapp.com/send?phone=${phone}`;
    el.setAttribute('rel','noopener noreferrer'); el.setAttribute('target','_blank');
  });
})();

/* Ensure about image fallback */
(function ensureAboutImage() {
  const imgEl = document.getElementById('about-img');
  if (!imgEl) return;
  const tester = new Image();
  tester.onload = () => console.info('[about] image loaded:', imgEl.src);
  tester.onerror = () => {
    const altUrl = 'images/neha_jorewar_about_me.jpeg';
    console.warn('[about] initial about image failed. Trying', altUrl);
    imgEl.src = altUrl;
    imgEl.removeAttribute('srcset');
  };
  tester.src = imgEl.src || 'images/neha_jorewar_about_me.jpeg';
})();

/* Hamburger controller (JS-driven) */
(function hamburgerController(){
  const btn = document.getElementById('hamburger-btn');
  const nav = document.getElementById('primary-navigation');
  const links = document.querySelectorAll('.nav-link');

  if (!btn || !nav) return;
  function isOpen(){ return nav.classList.contains('open'); }
  function openNav(){
    nav.classList.add('open'); btn.setAttribute('aria-expanded','true'); nav.setAttribute('data-open','true');
  }
  function closeNav(){
    nav.classList.remove('open'); btn.setAttribute('aria-expanded','false'); nav.setAttribute('data-open','false');
  }
  function toggleNav(){ isOpen() ? closeNav() : openNav(); }

  btn.addEventListener('click', (e) => { e.stopPropagation(); toggleNav(); });
  btn.addEventListener('keydown', (ev) => { if (ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); toggleNav(); } });

  links.forEach(a => a.addEventListener('click', () => { if (window.matchMedia('(max-width:768px)').matches) closeNav(); }));

  document.addEventListener('click', (e) => {
    if (!window.matchMedia('(max-width:768px)').matches) return;
    if (!isOpen()) return;
    const target = e.target;
    if (nav.contains(target) || btn.contains(target)) return;
    closeNav();
  });

  window.addEventListener('resize', () => {
    if (!window.matchMedia('(max-width:768px)').matches) {
      nav.classList.remove('open'); btn.setAttribute('aria-expanded','false'); nav.setAttribute('data-open','false');
    }
  });
})();

/* Bridal gallery modal (no zoom) */
(function bridalModal(){
  const openBtns = document.querySelectorAll('.open-bridal-gallery');
  const modal = document.getElementById('bridal-modal');
  if (!modal) { console.warn('[bridal] modal not found'); return; }
  const backdrop = modal.querySelector('.modal-backdrop');
  const modalPanel = modal.querySelector('.modal-panel');
  const mainImg = document.getElementById('bridal-modal-main');
  const spinner = document.getElementById('modal-spinner');
  const caption = document.getElementById('bridal-caption');
  const thumbsContainer = document.getElementById('bridal-thumbs');
  const prevBtn = modal.querySelector('[data-action="prev"]');
  const nextBtn = modal.querySelector('[data-action="next"]');
  const closeBtn = modal.querySelector('[data-action="close"], .modal-close');

  const folder = 'images/Bridal';
  const MAX = 12;
  const pad = n => n.toString().padStart(2,'0');
  const candidates = [];
  for (let i=1;i<=MAX;i++){ candidates.push(`${folder}/bridal_${pad(i)}.jpeg`); }

  function testImage(url, timeout = 5000){
    return new Promise((resolve) => {
      const img = new Image();
      let done = false;
      const tidy = ok => { if (!done) { done = true; resolve({ ok, url }); img.onload = img.onerror = null; } };
      img.onload = () => tidy(true);
      img.onerror = () => tidy(false);
      setTimeout(() => tidy(false), timeout);
      img.src = url;
    });
  }

  async function discover() {
    const found = [];
    for (const url of candidates) {
      // sequential checks reduce parallel requests
      // eslint-disable-next-line no-await-in-loop
      const res = await testImage(url);
      if (res.ok) found.push(url);
    }
    return found;
  }

  let images = [];
  let current = 0;
  let autoplayTimer = null;
  const AUTOPLAY_MS = 3000;

  function showSpinner(show = true){
    if (!spinner) return;
    spinner.classList.toggle('visible', !!show);
    spinner.setAttribute('aria-hidden', show ? 'false' : 'true');
  }

  function buildGallery(list){
    thumbsContainer.innerHTML = '';
    if (!list || list.length === 0){
      thumbsContainer.innerHTML = '<p style="padding:8px;color:#666">No bridal images found in images/Bridal (checked bridal_01.jpeg … bridal_12.jpeg)</p>';
      mainImg.src = ''; caption.textContent = '';
      return;
    }
    list.forEach((src,i)=>{
      const btn = document.createElement('button');
      btn.className = 'thumb';
      btn.type = 'button';
      btn.setAttribute('data-index', i);
      btn.setAttribute('role','tab');
      btn.setAttribute('aria-selected', i===0 ? 'true' : 'false');
      btn.innerHTML = `<img src="${src}" alt="Bridal thumbnail ${i+1}" loading="lazy">`;
      btn.addEventListener('click', ()=>{ showIndex(i); resetAutoplay(); });
      btn.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter' || ev.key===' '){ ev.preventDefault(); showIndex(i); resetAutoplay(); }});
      thumbsContainer.appendChild(btn);
    });
    showIndex(0);
  }

  function showIndex(i){
    if (!images || images.length === 0) return;
    i = (i + images.length) % images.length;
    current = i;
    showSpinner(true);

    mainImg.onload = () => { showSpinner(false); mainImg.style.width = ''; mainImg.style.height = ''; };
    mainImg.onerror = () => { showSpinner(false); console.warn('[bridal] failed to load', images[i]); };

    mainImg.src = images[i];
    mainImg.alt = `Bridal image ${i+1}`;
    caption.textContent = `Image ${i+1} of ${images.length}`;
    const thumbs = thumbsContainer.querySelectorAll('.thumb');
    thumbs.forEach((t, idx)=> t.setAttribute('aria-selected', idx===i ? 'true' : 'false'));
    const selected = thumbsContainer.querySelector('.thumb[aria-selected="true"]');
    selected && selected.scrollIntoView({ inline: 'center', behavior: 'smooth' });
  }

  function next(){ showIndex(current + 1); }
  function prev(){ showIndex(current - 1); }

  function startAutoplay(){ if (autoplayTimer || images.length <= 1) return; autoplayTimer = setInterval(next, AUTOPLAY_MS); }
  function stopAutoplay(){ if (!autoplayTimer) return; clearInterval(autoplayTimer); autoplayTimer = null; }
  function resetAutoplay(){ stopAutoplay(); startAutoplay(); }

  function openModal(){ modal.setAttribute('aria-hidden','false'); modalPanel && modalPanel.focus(); startAutoplay(); document.body.style.overflow = 'hidden'; }
  function closeModal(){ modal.setAttribute('aria-hidden','true'); stopAutoplay(); document.body.style.overflow = ''; openBtns.length && openBtns[0].focus(); }

  prevBtn && prevBtn.addEventListener('click', ()=>{ prev(); resetAutoplay(); });
  nextBtn && nextBtn.addEventListener('click', ()=>{ next(); resetAutoplay(); });
  closeBtn && closeBtn.addEventListener('click', closeModal);
  if (backdrop) backdrop.addEventListener('click', (e)=>{ if (e.target.dataset.close === 'true') closeModal(); });

  modal.addEventListener('keydown', (ev)=> {
    if (modal.getAttribute('aria-hidden') === 'true') return;
    if (ev.key === 'Escape') { ev.preventDefault(); closeModal(); }
    if (ev.key === 'ArrowLeft') { ev.preventDefault(); prev(); resetAutoplay(); }
    if (ev.key === 'ArrowRight') { ev.preventDefault(); next(); resetAutoplay(); }
  });

  modal.addEventListener('mouseenter', stopAutoplay);
  modal.addEventListener('mouseleave', startAutoplay);
  modal.addEventListener('focusin', stopAutoplay);
  modal.addEventListener('focusout', startAutoplay);

  openBtns.forEach(btn=>{
    btn.addEventListener('click', async ()=>{
      if (images.length === 0){
        modal.setAttribute('aria-hidden','false');
        const found = await discover();
        images = found;
        buildGallery(images);
      } else {
        buildGallery(images);
      }
      openModal();
    });
  });

  // pre-discover quietly
  setTimeout(()=>{ discover().then(found=>{ if (found && found.length) images = found; }); }, 1200);

})(); // end bridalModal
</script>
</body>
</html>

